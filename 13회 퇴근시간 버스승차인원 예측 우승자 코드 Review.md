## 13회 퇴근시간 버스승차인원 예측 우승자 코드 Review
* 기존 우승자들의 소스 코드 리뷰 진행
* 어떤식으로 접근했는지 Idea 위주로 정리

### 1등 돌하르방 우승자 코드 Review
#### 기상청 날씨누리 사이트에서 지상 관측 자료 크롤링 진행
* 기상청 날씨누리 사이트에서 지상 관측 자료를 크롤링 함
* 2019년 9월 1일부터 2019년 10월 16일 까지의 데이터를 크롤링
* 현재일기, 체감온도, 일강수 크롤링 진행
#### 승 하차 시간대 통합 변수 (t ~ t+2) 생성
* 기존 중급 코드에 적용된 변수 그대로 2시간 간격마다의 승 하차 인원 변수 생성
#### 승 하차 시간대 통합 변수 (t ~ t+3) 생성
#### target variable을 이용한 make feature 진행
* bus_route_id, station_name, weekday의 각 조합별 퇴근시간 하차인원(18~20_ride)의 여러 통계량을 구한 후 train set, test set에 모두 적용
* 쉽게 말하면, testset에서  bus_route_id, station_name, weekday 에 맞게 요약 통계량 컬럼을 추가한다는 의미
#### bus_route_id를 기준으로 18 ~ 20의 혼잡도 계산
* 1 ~ 7까지의 혼잡도 정도를 추가
#### 오전 시간의 탑승 및 하차 데이터를 활용하여 요약통계량을 만듬
* sum, mean 등의 요약 통계량 생성
#### 배차 간격 컬럼 생성
* 간격이 3분보다 작거나, 3시간보다 큰 것은 제외
* 배차 간격 컬럼에서 NA 값을 가지는 행들을 분석해본 결과, 대부분 18 ~ 20시의 탑승 인원이 거의 없는 bus_route_id와 station_code 였음
#### Label encoding feature
* bus_route_id, station_name, route_station_weekday(bus_route_id + weekday의 조합), route_station(bus_route_id + station_code 의 조합) 총 4개를 라벨인코딩 해줌
#### 좌표데이터를 이용한 변수 생성
* 제주도의 랜드마크를 좌표로 찍어 해당 좌표와의 거리를 변수로 생성
* 제주시, 제주시청, 한라병원, 제주도청신제주로터리.. 등 한 10개 정도 정해서 생성함
#### 기타 변수 생성
* 출근 시간의 총 승객 수 변수 생성
* 날짜 및 시간대 별 총 승객수 변수 생성
* 주말, 주중 변수 생성
* 연휴
* 요일 별 평균 승객 수
* 시내 및 시외버스 별 평균 탑승 승객
* 카테고리별 승객 수
* 카테고리별 승객의 비율
* 동 - 라벨 인코딩
* 수요가 많을 것으로 예상되는 정류장(학교, 환승, 공항, 터미널)
#### 외부 데이터 사용
*  각 동,읍,면별 직업군별 비율, 평균소득액, 평균소비액 사용
#### 모델 학습 및 검증
* 매우 많은 변수 컬럼이 존재하므로, 해당 컬럼을 5개로 분할하여 만듬
* 0번 -> LGBMRegressor, 1~4번 -> RandomForestRegressor,
* 멱평균을 실시 -> 최적의 P 값을 찾기위한 하이퍼 파라미터 튜닝 진행
* 산술평균 계산
